# 面试真题爬虫系统

## 🚀 快速开始

### 1. 一键安装
```bash
# 执行安装脚本
./setup.sh
```

### 2. 启动服务

#### 启动后端服务（Terminal 1）
```bash
cd server
npm run dev
# 服务将在 http://localhost:3001 启动
```

#### 启动前端应用（Terminal 2）
```bash
npm start
# 应用将在 http://localhost:3000 启动
```

### 3. 使用爬虫功能
1. 打开应用，进入题库管理
2. 点击"爬取真题"按钮
3. 选择岗位类别和目标网站
4. 点击开始爬取

## 📋 系统架构

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   React前端     │────▶│  Express后端    │────▶│ Playwright爬虫  │
│  (Port 3000)    │     │  (Port 3001)    │     │                 │
└─────────────────┘     └─────────────────┘     └─────────────────┘
                               │                          │
                               ▼                          ▼
                        ┌─────────────┐          ┌─────────────────┐
                        │    Redis    │          │   目标网站      │
                        │   缓存层    │          │ 牛客/CSDN/掘金 │
                        └─────────────┘          └─────────────────┘
```

## 🛠 技术栈

### 后端
- **Express.js**: Web框架
- **Playwright**: 无头浏览器爬虫
- **Redis**: 缓存和去重
- **TypeScript**: 类型安全
- **Winston**: 日志系统

### 前端
- **React**: UI框架
- **TypeScript**: 类型安全
- **Tailwind CSS**: 样式

## 📡 API接口

### 爬取面试题
```typescript
POST /api/interview/crawl
{
  "category": "前端开发",
  "maxQuestions": 20,
  "sites": ["nowcoder", "csdn", "juejin"],
  "keywords": ["react", "vue"]  // 可选
}
```

### 获取分类列表
```typescript
GET /api/interview/categories
```

### 获取支持的网站
```typescript
GET /api/interview/sites
```

## 🔧 配置说明

### 环境变量 (server/.env)
```env
PORT=3001
NODE_ENV=development
REDIS_HOST=localhost
REDIS_PORT=6379
GLM_API_KEY=your_glm_api_key_here
```

### 支持的岗位类别
- 前端开发
- 后端开发
- 算法岗
- 测试开发
- 运维开发
- 产品经理
- 数据分析

### 支持的爬取网站
- **牛客网**: 面试经验、真题分享
- **CSDN**: 技术博客、面试题整理
- **掘金**: 技术文章、面试分享

## 🚀 特色功能

### 1. 智能去重
- 自动检测重复题目
- 基于文本相似度去重
- 保证题库质量

### 2. 缓存机制
- Redis缓存24小时
- 减少重复爬取
- 提升响应速度

### 3. 反爬虫对策
- 随机User-Agent
- 请求延迟
- 浏览器指纹伪装
- 自动重试机制

### 4. 问题提取
- 智能识别面试题
- 多种模式匹配
- 自动分类标注

## 📊 性能指标

- 平均爬取速度: 10-20题/分钟
- 缓存命中率: >80%
- 题目准确率: >90%
- 支持并发: 3个爬虫实例

## 🐛 故障排查

### 爬虫无响应
1. 检查后端服务是否启动
2. 检查Redis是否运行
3. 查看server/logs/error.log

### 爬取失败
1. 检查网络连接
2. 目标网站可能更新了结构
3. 尝试减少爬取数量

### 缓存问题
```bash
# 清除Redis缓存
redis-cli FLUSHDB
```

## 📝 开发指南

### 添加新的爬取网站
1. 在 `InterviewCrawlerService.ts` 添加网站配置
2. 实现对应的爬取方法
3. 添加选择器配置
4. 测试并调试

### 优化爬取效率
1. 调整并发数量
2. 优化选择器
3. 增加缓存时间
4. 使用代理池

## 🔐 安全建议

1. **不要过于频繁爬取**，避免IP被封
2. **遵守robots.txt**规则
3. **仅爬取公开数据**
4. **添加请求延迟**，模拟人工操作
5. **定期更新User-Agent**

## 📈 后续优化

- [ ] 添加代理池支持
- [ ] 实现分布式爬虫
- [ ] 添加更多数据源
- [ ] 机器学习题目分类
- [ ] 自动更新爬虫规则
- [ ] WebSocket实时进度

## 💡 常见问题

**Q: 为什么爬取速度慢？**
A: 为了避免被反爬虫机制检测，系统添加了延迟。可以在代码中调整延迟时间。

**Q: 如何添加更多关键词？**
A: 在爬取界面的"自定义关键词"输入框中，用逗号分隔多个关键词。

**Q: 缓存多久更新一次？**
A: 默认24小时，可以在 `InterviewCrawlerService.ts` 中修改缓存时间。

## 📞 技术支持

如遇到问题，请查看：
1. 日志文件: `server/logs/`
2. 浏览器控制台
3. 后端终端输出

## 📄 License

MIT